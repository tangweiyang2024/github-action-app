# Flutter时间展示应用 - 操作流程图

## 📊 完整工作流程图

```
┌─────────────────────────────────────────────────────────────┐
│                    本地开发阶段                              │
├─────────────────────────────────────────────────────────────┤
│ 1. 创建/修改代码                                            │
│    ↓                                                        │
│ 2. 本地测试 (flutter run)                                   │
│    ↓                                                        │
│ 3. 代码检查 (flutter analyze)                               │
│    ↓                                                        │
│ 4. 运行测试 (flutter test)                                  │
└─────────────────────────────────────────────────────────────┘
                           ↓
┌─────────────────────────────────────────────────────────────┐
│                   Git版本控制阶段                            │
├─────────────────────────────────────────────────────────────┤
│ 5. git add .                                                │
│    ↓                                                        │
│ 6. git commit -m "描述信息"                                 │
│    ↓                                                        │
│ 7. git push origin main                                     │
└─────────────────────────────────────────────────────────────┘
                           ↓
┌─────────────────────────────────────────────────────────────┐
│              GitHub Actions自动构建阶段                      │
├─────────────────────────────────────────────────────────────┤
│ 8. 代码检出 (actions/checkout@v4)                          │
│    ↓                                                        │
│ 9. 并行构建两个任务:                                        │
│    ┌──────────────────────┬──────────────────────┐         │
│    │ Android/Web构建     │  iOS构建             │         │
│    │ (ubuntu-latest)     │  (macos-latest)      │         │
│    ├──────────────────────┼──────────────────────┤         │
│    │ 10a. 设置Flutter环境 │ 10b. 设置Flutter环境 │         │
│    │ 11a. 安装依赖        │ 11b. 安装依赖        │         │
│    │ 12a. 代码分析        │ 12b. 代码分析        │         │
│    │ 13a. 运行测试        │ 13b. 运行测试        │         │
│    │ 14a. 构建APK         │ 14b. 构建iOS         │         │
│    │ 15a. 构建Web         │ 15b. 创建IPA         │         │
│    │ 16a. 上传APK产物     │ 16b. 上传iOS产物     │         │
│    │ 17a. 上传Web产物     │                      │         │
│    └──────────────────────┴──────────────────────┘         │
└─────────────────────────────────────────────────────────────┘
                           ↓
┌─────────────────────────────────────────────────────────────┐
│                  产物下载与部署阶段                           │
├─────────────────────────────────────────────────────────────┤
│ 18. 访问GitHub仓库 → Actions标签                            │
│     ↓                                                       │
│ 19. 点击成功的工作流运行                                    │
│     ↓                                                       │
│ 20. 在Artifacts部分下载产物:                                │
│     • release-apk (Android安装包)                           │
│     • release-web (Web应用包)                               │
│     • release-ios (iOS IPA文件)                             │
│     ↓                                                       │
│ 21. 部署应用:                                               │
│     • 安装APK到Android设备                                  │
│     • 安装IPA到iOS设备 (需要签名)                           │
│     • 部署Web到服务器 (Netlify/Vercel/GitHub Pages)         │
└─────────────────────────────────────────────────────────────┘
```

---

## 🔄 持续集成/持续部署 (CI/CD) 流程

```
┌──────────────────┐
│   代码推送        │
│  (Push to main)  │
└────────┬─────────┘
         ↓
    ┌─────────┐
    │ 触发构建 │
    │ Actions │
    └────┬────┘
         ↓
┌──────────────────────────────┐
│     构建流程 (~5-10分钟)     │
├──────────────────────────────┤
│ ✅ 检出代码                  │
│ ✅ 安装环境                  │
│ ✅ 代码分析                  │
│ ✅ 运行测试                  │
│ ✅ 构建APK                   │
│ ✅ 构建Web                   │
│ ✅ 上传产物                  │
└────────┬─────────────────────┘
         ↓
    ┌────────┐
    │ 构建   │
    │ 成功   │
    └───┬────┘
        ↓
┌──────────────────┐
│  通知开发者       │
│ (邮件/GitHub通知) │
└────────┬─────────┘
         ↓
┌──────────────────┐
│  下载构建产物     │
│  (APK + Web)     │
└──────────────────┘
```

---

## 🎯 快速部署流程 (简化版)

```
开始
  ↓
┌─────────────────┐
│ 创建GitHub仓库  │
└────────┬────────┘
         ↓
┌─────────────────┐
│ 推送代码到GitHub│
│ git push origin │
└────────┬────────┘
         ↓
┌─────────────────┐
│ 等待自动构建完成 │
│ (~5-10分钟)     │
└────────┬────────┘
         ↓
┌─────────────────┐
│ 下载APK和Web文件│
└────────┬────────┘
         ↓
┌─────────────────┐
│ 安装/部署应用   │
└────────┬────────┘
         ↓
       完成
```

---

## 📱 应用部署选项

### Android APK部署
```
GitHub Actions产物
         ↓
    下载APK文件
         ↓
    ┌────┴────┐
    ↓         ↓
直接安装  上传应用商店
(adb install) (Google Play)
```

### Web应用部署
```
GitHub Actions产物
         ↓
    下载Web包
         ↓
    ┌────┴────┬────────┐
    ↓         ↓        ↓
  Netlify   Vercel  GitHub Pages
  (拖放)    (CLI)   (gh-pages分支)
```

---

## 🔧 故障排除流程

```
发现问题
    ↓
┌───────────────┐
│ 查看错误类型  │
└───────┬───────┘
        ↓
    ┌───┴────┬────────┬────────┐
    ↓        ↓        ↓        ↓
┌────┐  ┌────┐  ┌────┐  ┌────┐
│构建│  │测试│  │部署│  │环境│
│失败│  │失败│  │失败│  │配置│
└──┬─┘  └──┬─┘  └──┬─┘  └──┬─┘
   ↓       ↓       ↓       ↓
查看Actions  修复代码  重新下载  配置环境
日志        并提交    产物     变量
   ↓       ↓       ↓       ↓
   └───────┴───────┴───────┘
              ↓
         重新构建
```

---

## 📊 文件操作流程

### 本地开发流程
```
编辑代码 (lib/main.dart)
    ↓
保存文件
    ↓
热重载 (flutter run) 或 运行测试
    ↓
验证功能
    ↓
提交更改 (git commit)
```

### Git操作流程
```
工作区 (Working Directory)
    ↓ git add
暂存区 (Staging Area)
    ↓ git commit
本地仓库 (Local Repository)
    ↓ git push
远程仓库 (Remote Repository/GitHub)
    ↓ 触发
GitHub Actions自动构建
```

---

## 🎨 用户界面流程

```
应用启动
    ↓
显示时钟图标
    ↓
显示当前时间 (HH:MM:SS)
    ↓
显示当前日期 (星期, 月 日, 年)
    ↓
每秒自动更新时间
    ↓
持续运行...
```

---

## 💾 数据流程

```
DateTime.now() (获取当前时间)
    ↓
格式化时间 (_formatTime)
    ↓
格式化日期 (_formatDate)
    ↓
更新UI (setState)
    ↓
显示给用户
    ↓
1秒后重复
```

---

## 🔐 权限与配置流程

```
首次设置
    ↓
安装Flutter SDK
    ↓
配置环境变量
    ↓
flutter doctor 检查
    ↓
配置Git (git config)
    ↓
配置GitHub SSH密钥
    ↓
配置GitHub Actions
    ↓
完成设置
```

---

## 📈 监控与维护流程

```
应用部署后监控
    ↓
┌────────────┬────────────┬────────────┐
↓            ↓            ↓            ↓
GitHub       应用性能     用户反馈     构建状态
Actions      监控         收集         检查
监控                                  (Actions标签)
    ↓            ↓            ↓            ↓
└────────────┴────────────┴────────────┘
              ↓
         分析问题
              ↓
         修复代码
              ↓
         提交新版本
              ↓
         自动构建部署
              ↓
         重复监控
```

---

## 🎯 关键决策点流程图

### 构建成功后做什么？
```
构建成功
    ↓
┌───────────────────┐
│ 选择部署目标      │
└─────┬─────────────┘
      ↓
   ┌──┴──┬────────┐
   ↓     ↓        ↓
Android  iOS    Web
   ↓     ↓        ↓
下载APK 需Mac  下载Web包
   ↓     ↓        ↓
安装   构建IPA  部署到服务器
   ↓     ↓        ↓
分发   提交    公开URL
   ↓     ↓        ↓
     └───┴────┘
         ↓
    用户使用
```

### iOS应用构建和分发决策图
```
iOS构建完成
    ↓
┌─────────────────────────┐
│ 选择分发方式            │
└──────────┬──────────────┘
           ↓
    ┌──────┴──────┬───────────┬───────────┐
    ↓             ↓           ↓           ↓
┌────────┐  ┌────────┐  ┌────────┐  ┌────────┐
│App Store│  │TestFlight│  │Ad Hoc  │  │个人使用│
└───┬────┘  └────┬────┘  └────┬────┘  └────┬────┘
    ↓             ↓           ↓           ↓
开发者证书    发布证书    发布证书    无签名
    ↓             ↓           ↓           ↓
$99/年        $99/年      $99/年      免费
    ↓             ↓           ↓           ↓
App Store     Beta测试   企业内测    越狱设备
    ↓             ↓           ↓           ↓
审核流程      10000人    100设备    无限制
    ↓             ↓           ↓           ↓
公开发布      内部测试    团队分发    个人使用
```

### 遇到构建错误怎么办？
```
构建失败
    ↓
查看Actions日志
    ↓
┌───────────────────┐
│  识别错误类型     │
└─────┬─────────────┘
      ↓
   ┌──┴──┬──────────┬────────┐
   ↓     ↓          ↓        ↓
依赖   代码      测试    环境
问题   错误      失败    配置
   ↓     ↓          ↓        ↓
更新   修复      跳过/    重新
pubspec  代码      修复    配置
   ↓     ↓          ↓        ↓
重新     重新      重新    重新
提交     提交      构建    构建
```

---

这些流程图涵盖了从开发到部署的完整生命周期。根据需要选择相应的流程进行操作。